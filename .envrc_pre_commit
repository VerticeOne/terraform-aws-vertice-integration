#!/usr/bin/env bash
# This file is copy synchronized from https://github.com/VerticeOne/vertice-file-templates
# Please do not edit this file directly in this repository.

function log() {
    echo "==> $1"
}

function check_asdf_availability() {
    if ! command -v asdf >/dev/null; then
        log "asdf not available."
        exit 1
    fi
}

function check_asdf_plugin() {
    if ! asdf plugin list | grep -i $1 >/dev/null; then
        log "asdf plugin $1 not installed. Run: 'asdf plugin add $1'"
        exit 1
    fi
}

function install_env_deps() {
    log "Installing dependencies with asdf..."
    asdf install pre-commit
    log "current setup"
    asdf current
}

function install_hooks() {
    log "Installing pre-commit hooks"
    pre-commit install
}

check_asdf_availability

check_asdf_plugin "pre-commit"

install_env_deps

install_hooks
